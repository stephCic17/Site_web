function interval(){getMessage(),getQuestion()}function getMessage(){$.post(url,{action:"getMessage",lastid:lastid},function(a){"ok"==a.erreur&&reloadDivTchat(a.result)},"json")}function getQuestion(){return $.post(url2,{action:"getQuestions",lastidQ:lastidQ},function(a){"ok"==a.erreur&&reloadDiv(a.div)},"json"),!1}function upvote(a){return $.post(url2,{action:"addUpvote",id:a},function(a){"ok"==a.erreur?getQuestion():"id"==a.erreur?($("#subscribeModal").addClass("-opening"),window.setTimeout(function(){$("body").addClass("no-scroll"),$("#subscribeModal").addClass("-open"),$("#subscribeModal").removeClass("-opening")},600)):alert("Vous avez déjà voté pour cette question")},"json"),!1}function reloadDiv(a){document.getElementById("affQ").innerHTML=a}function reloadDivTchat(a){document.getElementById("tchat").innerHTML=a}function test_valid_mail(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a.value)?(surligne(a,!1),!0):(surligne(a,!0),!1)}function test_valid_mail_send(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a.value)?(surligne(a,!1),$("#btn-sendMail").addRemove("-disabled"),!0):(surligne(a,!0),$("#btn-sendMail").addClass("-disabled"),!1)}function test_valid_pseudo(a){login=a.value,$.post(url3,{action:"TestPseudoInput",login:login},function(b){"ok"==b.erreur?(a.style.backgroundColor="",$("#btn-subscribe").removeClass("-disabled")):(a.style.backgroundColor="#fba",$("#btn-subscribe").addClass("-disabled"))},"json")}function test_invalid_pseudo(a){login=a.value,$.post(url3,{action:"TestPseudoInput",login:login},function(b){"ok"==b.erreur?(a.style.backgroundColor="#fba",$("#btn-connect").addClass("-disabled")):(a.style.backgroundColor="",$("#btn-connect").removeClass("-disabled"))},"json")}function test_valid_name(a){login=a,$.post(url3,{action:"TestPseudoInput",login:login},function(b){"ok"==b.erreur?(a.style.backgroundColor="",$("#btn-subscribe").removeClass("-disabled")):(a.style.backgroundColor="#fba",$("#btn-subscribe").addClass("-disabled"))},"json")}function surligne(a,b){b?(a.style.backgroundColor="#fba",$("#btn-subscribe").addClass("-disabled")):(a.style.backgroundColor="",test_valid_pseudo_name(login))}var url="tchat/tchatAjax.php",url2="question/questionAjax.php",popupActive=0,url3="user/userAjax.php",timer2=setInterval(interval,2e3),lastid=0,lastidQ=0,login="";$(function(){$("#tchatForm form").submit(function(){var a=$("#tchatForm form input").val(),b=document.getElementById("tchat");b.scrollTop=b.scrollHeight;var c=document.getElementById("tchatInput");c.focus(),$.post(url,{action:"addMessage",message:a},function(a){},"json")}),$("#questionForm form").submit(function(){var a=$("#questionForm form input").val(),b=document.getElementById("affQ");b.scrollTop=b.scrollHeight,$.post(url2,{action:"addQuestion",question:a},function(a){},"json")}),$("#UserForm form").submit(function(){var a=$("#UserForm form input").val();$.post(url3,{action:"TestPseudo",login:a},function(a){},"json")})});var isModalOpen=!1,openLoginModal=function(){$("#loginModal").addClass("-opening"),window.setTimeout(function(){$("body").addClass("no-scroll"),$("#loginModal").addClass("-open"),$("#loginModal").removeClass("-opening")},600)},openSubscribeModal=function(){$("#subscribeModal").addClass("-opening"),window.setTimeout(function(){$("body").addClass("no-scroll"),$("#subscribeModal").addClass("-open"),$("#subscribeModal").removeClass("-opening")},600)},openLostPasswordModal=function(){$("#lostPasswordModal").addClass("-opening"),window.setTimeout(function(){$("body").addClass("no-scroll"),$("#lostPasswordModal").addClass("-open"),$("#lostPasswordModal").removeClass("-opening")},600)},openPseudoExistModal=function(){$("#lostPasswordModal").addClass("-opening"),window.setTimeout(function(){$("body").addClass("no-scroll"),$("#lostPasswordModal").addClass("-open"),$("#lostPasswordModal").removeClass("-opening")},600)},closeModal=function(){$(".modal").addClass("-closing"),window.setTimeout(function(){$(".modal").removeClass("-open"),$(".modal").removeClass("-closing"),$("body").removeClass("no-scroll")},350)};$(document).ready(function(){$(".touch, .button:not(.-loading):not(.-disabled):not([disabled])").click(function(a){var b,c,d,e;console.log(2),0===$(this).find(".touch-elem").length&&$(this).prepend("<div class='touch-elem'></div>"),b=$(this).find(".touch-elem"),b.removeClass("animate"),b.height()||b.width()||(c=Math.max($(this).outerWidth(),$(this).outerHeight()),b.css({height:c,width:c})),d=a.pageX-$(this).offset().left-b.width()/2,e=a.pageY-$(this).offset().top-b.height()/2,b.css({top:e+"px",left:d+"px"}).addClass("animate")});var a=document.getElementById("tchat");a.scrollTop=a.scrollHeight,$(".open-login-modal").click(function(a){a.preventDefault(),isModalOpen?(closeModal(),window.setTimeout(function(){openLoginModal(),isModalOpen=!0},350)):(openLoginModal(),isModalOpen=!0)}),$(".open-subscribe-modal").click(function(a){a.preventDefault(),isModalOpen?(closeModal(),window.setTimeout(function(){openSubscribeModal(),isModalOpen=!0},350)):(openSubscribeModal(),isModalOpen=!0)}),$(".open-lostpassword-modal").click(function(a){a.preventDefault(),isModalOpen?(closeModal(),window.setTimeout(function(){openLostPasswordModal(),isModalOpen=!0},350)):(openLostPasswordModal(),isModalOpen=!0)}),$(".open-pseudoExist-modal").click(function(a){a.preventDefault(),isModalOpen?(closeModal(),window.setTimeout(function(){openPseudoExistModal(),isModalOpen=!0},350)):(openPseudoExistModal(),isModalOpen=!0)}),$(".close-modal").click(function(a){a.preventDefault(),isModalOpen=!1,closeModal()})});